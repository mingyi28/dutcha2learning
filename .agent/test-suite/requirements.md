# 需求文档

## 引言
为了确保“荷兰语学习应用”的核心业务逻辑（特别是新增的每日学习记录和打卡功能）正常工作，我们需要创建一个内置的测试运行器页面。该页面将执行一系列自动化测试用例，验证数据存储和状态管理的正确性。

## 需求

### 需求 1：测试运行器页面

**用户故事：** 作为一名开发者/用户，我希望有一个专门的测试页面，以便我能一键运行测试并查看系统逻辑是否正常。

#### 验收标准

1. **WHEN** 用户访问 `/test` 路由，**THEN** 系统应当展示测试运行器界面。
2. **IF** 进入页面，**THEN** 系统应当自动（或通过按钮触发）执行定义好的测试套件。
3. **THEN** 页面应当列出每个测试用例的名称、状态（通过/失败）和详细的错误信息（如果有）。

### 需求 2：核心业务逻辑测试

**用户故事：** 作为一名开发者，我希望测试核心的存储和状态管理函数，以确保学习进度和打卡记录被正确保存。

#### 验收标准

1. **测试用例 1 (初始化)**: 验证 `initTodayWords` 在新的一天能正确生成10个新单词的目标。
2. **测试用例 2 (学习记录)**: 验证 `markWordAsLearned` 不仅更新 `learnedWordIds`，还能正确地将单词ID添加到当天的 `dailyLearningRecords` 中。
3. **测试用例 3 (打卡)**: 验证 `checkIn` 能正确更新 `lastCheckInDate`，增加 `consecutiveDays`，并将日期添加到 `checkInHistory`。
4. **测试用例 4 (数据持久化)**: 验证数据能正确写入和读取 `localStorage`。

### 需求 3：测试环境隔离

**用户故事：** 作为一名开发者，我希望测试过程不影响我真实的学习进度。

#### 验收标准

1. **WHEN** 开始测试，**THEN** 系统应当使用一个独立的 `localStorage` 键（如 `dutch_app_test_progress`）或在测试前备份并测试后恢复真实数据。
2. **Note**: 为了简单和安全，建议测试脚本在执行前先备份现有的 `dutch_app_progress`，测试完成后恢复，或者使用 mock 的 storage 适配器。鉴于是在浏览器环境，备份/恢复方案较易实现。

